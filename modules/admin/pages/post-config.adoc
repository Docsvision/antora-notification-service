= Конфигурация модуля

После установки {of-ns} выполните необходимые настройки для работы модуля:

. После установки _{of-ns}_ в _{sett-serv}_ _{of-mc}_ автоматически появляется специальный тип конфигурации _{ns}_.
. В {of-mc} откройте вкладку "Служба {ws}" и подключите новый процесс. Подробнее см. "xref:5.5.1@mgmtconsole:user:worker-service.adoc[]".
. Нажмите на кнопку *Подключить процесс*
. В появившемся окне введите _Имя процесса_ и выберите _Тип конфигурации_ *_{ns}_*.
. Укажите настройки {of-ns}:
+
.Настройки процесса в {of-mc} для {of-ns}
image::settings.png[Настройки процесса в {of-mc} для {of-ns}]
+
* Соединение {dv} -- поле обязательно для заполнения, подробнее см. в разделе "xref:5.5.1@mgmtconsole:user:worker-service.adoc#add[Добавить процесс]" документации модуля {mc}.
* Соединение Почтовый сервер -- выберите из списка настроенное подключение к почтовому серверу. Настроить подключение можно на вкладке _Соединения_, подробнее см. в разделе "xref:5.5.1@mgmtconsole:user:connections-mail-server.adoc[]" документации модуля {mc}.
* Таймаут -- поле необязательно для заполнения, подробнее см. в разделе "xref:5.5.1@mgmtconsole:user:worker-service.adoc#add[Добавить процесс]" документации модуля {mc}.
* Использовать x86 -- установите флаг, чтобы переключить обработку заданий на версию {of-ws} с указанной разрядностью. Когда флаг снят, используется разрядность x64.
+
NOTE: В {of-mc}, в разделах Очередь "xref:5.5.1@mgmtconsole:user:msg-incoming.adoc[входящих]" и "xref:5.5.1@mgmtconsole:user:msg-outgoing.adoc[исходящих]" сообщений отображаются все действия с Сервисом уведомлений. Если в процессе выполнения запроса возникла ошибка, она будет отображена в {of-mc}, на странице "xref:5.5.1@mgmtconsole:user:msg-outgoing.adoc[Очередь исходящих сообщений]".

[#process]
== Процесс настройки отправки уведомлений

Чтобы уведомления отправлялись пользователям, необходимо выполнить настройку в несколько шагов.

. Зарегистрируйте событие в "xref:notification-events-directory.adoc[Справочнике событий уведомлений]".
. Создайте и заполните xref:post-config.adoc#settings[карточку настроек уведомления].
. Создайте и заполните карточку xref:post-config.adoc#sending[настроек рассылки уведомлений], указав событие, по которому будет осуществляться рассылка.

[#settings]
== Создание и настройка Карточки настроек уведомления

Карточка отвечает за оформление уведомления и предназначена для настройки конкретного уведомления.

.Карточка настроек уведомления
image::notification-settings-card.png[Карточка настроек уведомления]

.Поля карточки настройки уведомления:
* Название -- произвольное название карточки, определяющее её предназначение.
* Описание -- развёрнутое описание карточки, любые подробности, которые необходимы для работы с уведомлением.

.Настройки уведомления (значения из "xref:notification-settings-directory.adoc[Справочника {nss}]":
* Компонент контекста данных -- контекст, откуда будут получены данные для уведомления.
* Компонент преобразования -- компонент преобразования контекста, отвечает за то, как будет оформлено уведомление, можно использовать XSLT или простой текст.
* Компонент отправки -- канал отправки уведомления, например, электронная почта.
* Добавлять основные файлы -- флаг определяет, будут ли к уведомлению приложены основные файлы.
* Добавлять дополнительные файлы -- флаг определяет, будут ли к уведомлению приложены дополнительные файлы.

.Настройки компонентов:
* Настройки темы -- выберите компонент преобразования темы, настроенный в "xref:notification-settings-directory.adoc[Справочнике {nss}]", можно использовать XSLT или простой текст.
* Настройки содержания -- выберите компонент преобразования содержания уведомления, настроенный в "xref:notification-settings-directory.adoc[Справочнике {nss}]", можно использовать XSLT или простой текст.
* Настройки получателей -- выберите компонент преобразования получателей уведомления, настроенный в "xref:notification-settings-directory.adoc[Справочнике {nss}]", можно использовать XSLT или простой текст.

.Получатели уведомления:
* Получатели -- пользователи из справочника сотрудников, которым будет отправлено уведомление. Для выбора доступны значения: *_Группа_*, *_Подразделение_*,
// *_Простое значение_* (почтовый адрес),
*_Роль_*, *_Сотрудник_*, *_Сотрудник контрагента_*.
* Исключить получателей -- пользователи из справочника сотрудников, которым не будет отправлено уведомление. Для выбора доступны значения: *_Группа_*, *_Подразделение_*,
// *_Простое значение_* (почтовый адрес),
*_Роль_*, *_Сотрудник_*, *_Сотрудник контрагента_*.

[#sending]
== Создание и настройка Карточки настроек рассылки уведомлений

Карточка настроек рассылки уведомлений хранит подробные настройки рассылки уведомлений.

.Карточка настроек рассылки уведомлений
image::notification-sending-settings-card.png[Карточка настроек рассылки уведомлений]

* Название карточки -- название карточки, отражающее суть карточки.
* Событие из справочника событий -- выбранное событие из "xref:notification-settings-directory.adoc[Справочника {ne}]", которое будет запускать рассылку уведомлений.
+
.Выбор события из справочника событий уведомлений
image::add-event.png[Выбор события из справочника событий уведомлений]
+
* Ссылки -- ссылки на созданные карточки настроек уведомления.
+
.Добавление ссылки на карточку уведомления
image::add-link.png[Добавление ссылки на карточку уведомления]
+
При нажатии на кнопку image:buttons/plus.png[Плюс] открывается окно поиска ссылки на карточки настроек уведомления. При поиске можно указать тип искомого объекта (в данный момент доступны только *_Ссылки_*) и область поиска
+
* При нажатии кнопки image:buttons/adjustments.png[Настройки] открывается окно настройки столбцов, позволяющее выбрать, какие столбцы будут отображаться в карточке при открытии её в режиме чтения.
+
.Настройка столбцов
image::notification-sending-settings-columns.png[Настройка столбцов]
